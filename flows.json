[{"id":"8f9dfce3.739218","type":"tab","label":"flujo_pasajero_select_len","disabled":false,"info":""},{"id":"2952041.d8a12fc","type":"tab","label":"flujo conductor","disabled":false,"info":""},{"id":"dad6006e.5b03f8","type":"tab","label":"flujo pasajero","disabled":false,"info":""},{"id":"f890fb8b.d9d9b8","type":"tab","label":"tester","disabled":false,"info":""},{"id":"4d9b3130.a18a08","type":"ui_group","name":"Chat","tab":"37cffe76.bd877a","order":2,"disp":true,"width":"10","collapse":false},{"id":"9bb15170.c72018","type":"ui_group","name":"Record","tab":"37cffe76.bd877a","order":1,"disp":true,"width":"6","collapse":false},{"id":"37cffe76.bd877a","type":"ui_tab","name":"COVID Voice Chatbot","icon":"dashboard","disabled":false,"hidden":false},{"id":"57d5d808.7d5c2","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"cc275635.4e7948","type":"websocket-listener","path":"/ws/audioInput","wholemsg":"false"},{"id":"cd8a8baf.e86a","type":"mqtt-broker","name":"","broker":"https://mqtt.eclipseprojects.io/","port":"1883","clientid":"","usetls":false,"protocolVersion":"4","keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willPayload":"","willMsg":{},"sessionExpiry":""},{"id":"b4bfecac.db1af","type":"websocket-listener","path":"/ws/passengerAudio","wholemsg":"false"},{"id":"cff7df06.c08528","type":"mqtt-broker","name":"","broker":"https://mqtt.eclipseprojects.io/","port":"1883","clientid":"","usetls":false,"protocolVersion":"4","keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willPayload":"","willMsg":{},"sessionExpiry":""},{"id":"4d9b8b5e.bb236c","type":"websocket-listener","path":"/ws/passengerAudio","wholemsg":"false"},{"id":"f5fcec3d.ac8c68","type":"mqtt-broker","name":"","broker":"https://mqtt.eclipseprojects.io/","port":"1883","clientid":"","usetls":false,"protocolVersion":"4","keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willPayload":"","willMsg":{},"sessionExpiry":""},{"id":"357b7e2c.36b3fa","type":"websocket-listener","path":"/ws/passengerAudio","wholemsg":"false"},{"id":"f900b47a.ea517","type":"inject","z":"8f9dfce3.739218","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"fr","payloadType":"str","x":310,"y":180,"wires":[["e46ef516.061b7"]]},{"id":"e46ef516.061b7","type":"function","z":"8f9dfce3.739218","name":"global_len","func":"global.set(\"lengSelected\", msg.payload);","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":180,"wires":[[]]},{"id":"1d0d43d4.6a8664","type":"watson-speech-to-text","z":"8f9dfce3.739218","name":"en txt","alternatives":1,"speakerlabels":true,"smartformatting":false,"lang":"en-US","langhidden":"en-US","langcustom":"NoCustomisationSetting","langcustomhidden":"","custom-weight":"0.5","band":"BroadbandModel","bandhidden":"","keywords":"","keywords-threshold":"0.5","word-confidence":false,"password":"","apikey":"M3tcaL1TUkS9rn7SuN2EWYxk4HV6lRiUnt66XH325KBZ","payload-response":false,"streaming-mode":false,"streaming-mute":true,"auto-connect":false,"discard-listening":false,"disable-precheck":false,"service-endpoint":"https://api.us-south.speech-to-text.watson.cloud.ibm.com/instances/76ca67df-8c3a-497e-aa3c-af39458e71d8","x":550,"y":360,"wires":[["10eecd33.102a03"]]},{"id":"da3af823.03349","type":"watson-speech-to-text","z":"8f9dfce3.739218","name":"fr txt","alternatives":1,"speakerlabels":true,"smartformatting":false,"lang":"fr-FR","langhidden":"fr-FR","langcustom":"NoCustomisationSetting","langcustomhidden":"","custom-weight":"0.5","band":"BroadbandModel","bandhidden":"","keywords":"","keywords-threshold":"0.5","word-confidence":false,"password":"","apikey":"M3tcaL1TUkS9rn7SuN2EWYxk4HV6lRiUnt66XH325KBZ","payload-response":false,"streaming-mode":false,"streaming-mute":true,"auto-connect":false,"discard-listening":false,"disable-precheck":false,"service-endpoint":"https://api.us-south.speech-to-text.watson.cloud.ibm.com/instances/76ca67df-8c3a-497e-aa3c-af39458e71d8","x":550,"y":400,"wires":[["10eecd33.102a03"]]},{"id":"9f0656d9.0ceea","type":"watson-speech-to-text","z":"8f9dfce3.739218","name":"it txt","alternatives":1,"speakerlabels":true,"smartformatting":false,"lang":"fr-FR","langhidden":"fr-FR","langcustom":"NoCustomisationSetting","langcustomhidden":"","custom-weight":"0.5","band":"BroadbandModel","bandhidden":"","keywords":"","keywords-threshold":"0.5","word-confidence":false,"password":"","apikey":"M3tcaL1TUkS9rn7SuN2EWYxk4HV6lRiUnt66XH325KBZ","payload-response":false,"streaming-mode":false,"streaming-mute":true,"auto-connect":false,"discard-listening":false,"disable-precheck":false,"service-endpoint":"https://api.us-south.speech-to-text.watson.cloud.ibm.com/instances/76ca67df-8c3a-497e-aa3c-af39458e71d8","x":550,"y":440,"wires":[["10eecd33.102a03"]]},{"id":"f3097a3e.540b68","type":"microphone","z":"8f9dfce3.739218","name":"","x":150,"y":400,"wires":[["f02d00eb.56c738"]]},{"id":"f02d00eb.56c738","type":"switch","z":"8f9dfce3.739218","name":"","property":"lengSelected","propertyType":"global","rules":[{"t":"eq","v":"en","vt":"str"},{"t":"eq","v":"fr","vt":"str"},{"t":"eq","v":"it","vt":"str"},{"t":"eq","v":"ja","vt":"str"},{"t":"eq","v":"ru","vt":"str"}],"checkall":"false","repair":false,"outputs":5,"x":330,"y":400,"wires":[["1d0d43d4.6a8664"],["da3af823.03349"],["9f0656d9.0ceea"],[],[]]},{"id":"10eecd33.102a03","type":"change","z":"8f9dfce3.739218","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"transcription","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":400,"wires":[["53b9d583.72212c"]]},{"id":"aee5ff53.5900d","type":"watson-translator","z":"8f9dfce3.739218","name":"en to es","action":"translate","basemodel":"ar-en","domain":"general","srclang":"en","destlang":"es","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"en","destlanghidden":"es","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":600,"y":660,"wires":[["9dc6ccef.206ee"]]},{"id":"35362f2e.e6f29","type":"watson-translator","z":"8f9dfce3.739218","name":"fr to es","action":"translate","basemodel":"ar-en","domain":"general","srclang":"fr","destlang":"es","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"fr","destlanghidden":"es","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":590,"y":720,"wires":[["9dc6ccef.206ee"]]},{"id":"c198384f.04a37","type":"watson-translator","z":"8f9dfce3.739218","name":"it to en","action":"translate","basemodel":"ar-en","domain":"general","srclang":"it","destlang":"en","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"it","destlanghidden":"en","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":530,"y":760,"wires":[["782f71ad.adb2"]]},{"id":"782f71ad.adb2","type":"watson-translator","z":"8f9dfce3.739218","name":"en to es","action":"translate","basemodel":"ar-en","domain":"general","srclang":"en","destlang":"es","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"en","destlanghidden":"es","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":680,"y":760,"wires":[["9dc6ccef.206ee"]]},{"id":"9dc6ccef.206ee","type":"watson-text-to-speech","z":"8f9dfce3.739218","name":"","lang":"es-ES","langhidden":"es-ES","langcustom":"NoCustomisationSetting","langcustomhidden":"","voice":"es-ES_LauraV3Voice","voicehidden":"es-ES_LauraV3Voice","format":"audio/wav","password":"","apikey":"HsnMmk_AV77jVLMKJqOvpyGtyB6Yd2-MW6Yj__c7m2ah","payload-response":false,"service-endpoint":"https://api.us-south.text-to-speech.watson.cloud.ibm.com/instances/a0216c77-6df9-419d-92d3-13b16a992536","x":880,"y":700,"wires":[["d46a9e4.4d0b1e"]]},{"id":"d46a9e4.4d0b1e","type":"change","z":"8f9dfce3.739218","name":"set speech as payload","rules":[{"t":"set","p":"payload","pt":"msg","to":"speech","tot":"msg"},{"t":"delete","p":"speech","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":640,"wires":[["f584eb21.b4e308"]]},{"id":"f584eb21.b4e308","type":"play audio","z":"8f9dfce3.739218","name":"","voice":"0","x":1290,"y":640,"wires":[]},{"id":"53b9d583.72212c","type":"watson-language-translator-identify","z":"8f9dfce3.739218","name":"","service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":170,"y":700,"wires":[["f0588356.460bf8"]]},{"id":"f0588356.460bf8","type":"switch","z":"8f9dfce3.739218","name":"","property":"lang.language","propertyType":"msg","rules":[{"t":"eq","v":"en","vt":"str"},{"t":"eq","v":"fr","vt":"str"},{"t":"eq","v":"it","vt":"str"},{"t":"eq","v":"ja","vt":"str"},{"t":"eq","v":"ru","vt":"str"}],"checkall":"false","repair":false,"outputs":5,"x":350,"y":700,"wires":[["aee5ff53.5900d"],["35362f2e.e6f29"],["c198384f.04a37"],[],[]]},{"id":"a254409e.6c7948","type":"watson-speech-to-text","z":"dad6006e.5b03f8","name":"","alternatives":1,"speakerlabels":true,"smartformatting":false,"lang":"en-US","langhidden":"en-US","langcustom":"NoCustomisationSetting","langcustomhidden":"","custom-weight":"0.5","band":"Multimedia","bandhidden":"Multimedia","keywords":"","keywords-threshold":"0.5","word-confidence":false,"password":"","apikey":"M3tcaL1TUkS9rn7SuN2EWYxk4HV6lRiUnt66XH325KBZ","payload-response":false,"streaming-mode":false,"streaming-mute":true,"auto-connect":false,"discard-listening":false,"disable-precheck":false,"service-endpoint":"https://api.us-south.speech-to-text.watson.cloud.ibm.com/instances/76ca67df-8c3a-497e-aa3c-af39458e71d8","x":220,"y":260,"wires":[["15204429.f3194c","ddc6f06c.b2d108"]]},{"id":"15204429.f3194c","type":"debug","z":"dad6006e.5b03f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":200,"wires":[]},{"id":"1bddf4f.00fb28b","type":"play audio","z":"dad6006e.5b03f8","name":"","voice":"0","x":1170,"y":340,"wires":[]},{"id":"e3d153b2.92d8e","type":"change","z":"dad6006e.5b03f8","name":"set speech as payload","rules":[{"t":"set","p":"payload","pt":"msg","to":"speech","tot":"msg"},{"t":"delete","p":"speech","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":320,"wires":[["1bddf4f.00fb28b","9c56b050.d3bf8"]]},{"id":"8aabb6ba.12ff38","type":"watson-text-to-speech","z":"dad6006e.5b03f8","name":"","lang":"es-ES","langhidden":"es-ES","langcustom":"NoCustomisationSetting","langcustomhidden":"","voice":"es-ES_LauraV3Voice","voicehidden":"es-ES_LauraV3Voice","format":"audio/wav","password":"","apikey":"HsnMmk_AV77jVLMKJqOvpyGtyB6Yd2-MW6Yj__c7m2ah","payload-response":false,"service-endpoint":"https://api.us-south.text-to-speech.watson.cloud.ibm.com/instances/a0216c77-6df9-419d-92d3-13b16a992536","x":680,"y":340,"wires":[["e3d153b2.92d8e"]]},{"id":"ddc6f06c.b2d108","type":"change","z":"dad6006e.5b03f8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"transcription","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":220,"y":380,"wires":[["5cbf71d7.878de8"]]},{"id":"303459de.1359ee","type":"websocket in","z":"dad6006e.5b03f8","name":"audioInput","server":"357b7e2c.36b3fa","client":"","x":340,"y":40,"wires":[["a254409e.6c7948"]]},{"id":"9c56b050.d3bf8","type":"websocket out","z":"dad6006e.5b03f8","name":"audioOut","server":"cc275635.4e7948","client":"","x":1160,"y":220,"wires":[]},{"id":"3d963f6c.46eb78","type":"microphone","z":"dad6006e.5b03f8","name":"","x":150,"y":40,"wires":[["a254409e.6c7948"]]},{"id":"fa37502d.02ade8","type":"switch","z":"dad6006e.5b03f8","name":"voice commands","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"ayuda","vt":"str"},{"t":"cont","v":"adiós","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":290,"y":600,"wires":[["b1ae7c9.9fb8f"],["393cc42c.5df7f4"]]},{"id":"b1ae7c9.9fb8f","type":"function","z":"dad6006e.5b03f8","name":"keyword \"ayuda\"","func":"var alertMsg = {payload: \"palabra clave detectada: ayuda\"}\nreturn alertMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":570,"y":580,"wires":[["df2f0059.e5bcc8"]]},{"id":"df2f0059.e5bcc8","type":"debug","z":"dad6006e.5b03f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":540,"wires":[]},{"id":"393cc42c.5df7f4","type":"function","z":"dad6006e.5b03f8","name":"keyphrase \"chao\"","func":"var alertMsg = {payload: \"palabra clave detectada adiós\"}\nreturn alertMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":640,"wires":[["49d718ab.1320a"]]},{"id":"49d718ab.1320a","type":"debug","z":"dad6006e.5b03f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":640,"wires":[]},{"id":"8bee677.f621e98","type":"watson-speech-to-text","z":"2952041.d8a12fc","name":"","alternatives":1,"speakerlabels":true,"smartformatting":false,"lang":"es-ES","langhidden":"es-ES","langcustom":"NoCustomisationSetting","langcustomhidden":"","custom-weight":"0.5","band":"Telephony","bandhidden":"Telephony","keywords":"","keywords-threshold":"0.5","word-confidence":false,"password":"","apikey":"M3tcaL1TUkS9rn7SuN2EWYxk4HV6lRiUnt66XH325KBZ","payload-response":false,"streaming-mode":false,"streaming-mute":true,"auto-connect":false,"discard-listening":false,"disable-precheck":false,"service-endpoint":"https://api.us-south.speech-to-text.watson.cloud.ibm.com/instances/76ca67df-8c3a-497e-aa3c-af39458e71d8","x":200,"y":140,"wires":[["711dbb01.3258a4","cf6bd2d4.c8052"]]},{"id":"711dbb01.3258a4","type":"change","z":"2952041.d8a12fc","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"transcription","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":280,"wires":[["d10bd8ae.71334","36a9d671.6037ca","8c96af3.b7145d"]]},{"id":"3034ef84.3ecdb8","type":"websocket in","z":"2952041.d8a12fc","name":"audioInput","server":"cc275635.4e7948","client":"","x":380,"y":40,"wires":[["8bee677.f621e98","c24e4a0b.f05778"]]},{"id":"3ec7b0b9.1c4d78","type":"microphone","z":"2952041.d8a12fc","name":"","x":170,"y":40,"wires":[["8bee677.f621e98"]]},{"id":"d10bd8ae.71334","type":"watson-translator","z":"2952041.d8a12fc","name":"es to en","action":"translate","basemodel":"ar-en","domain":"general","srclang":"es","destlang":"en","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"es","destlanghidden":"en","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":500,"y":280,"wires":[["36b9eea5.e118ea","cb37190e.58d378"]]},{"id":"36b9eea5.e118ea","type":"watson-text-to-speech","z":"2952041.d8a12fc","name":"","lang":"en-US","langhidden":"en-US","langcustom":"NoCustomisationSetting","langcustomhidden":"","voice":"en-US_LisaV3Voice","voicehidden":"en-US_LisaV3Voice","format":"audio/wav","password":"","apikey":"HsnMmk_AV77jVLMKJqOvpyGtyB6Yd2-MW6Yj__c7m2ah","payload-response":false,"service-endpoint":"https://api.us-south.text-to-speech.watson.cloud.ibm.com/instances/a0216c77-6df9-419d-92d3-13b16a992536","x":720,"y":300,"wires":[["bd6889f2.e75fb8","c4f861ee.275c"]]},{"id":"bd6889f2.e75fb8","type":"change","z":"2952041.d8a12fc","name":"set speech as payload","rules":[{"t":"set","p":"payload","pt":"msg","to":"speech","tot":"msg"},{"t":"delete","p":"speech","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":360,"wires":[["7b0c80ff.c1ee18","32c54f0b.133148"]]},{"id":"32c54f0b.133148","type":"websocket out","z":"2952041.d8a12fc","name":"audioOut","server":"cc275635.4e7948","client":"","x":1220,"y":300,"wires":[]},{"id":"7b0c80ff.c1ee18","type":"play audio","z":"2952041.d8a12fc","name":"","voice":"1","x":1230,"y":420,"wires":[]},{"id":"cb37190e.58d378","type":"debug","z":"2952041.d8a12fc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":670,"y":380,"wires":[]},{"id":"cf6bd2d4.c8052","type":"debug","z":"2952041.d8a12fc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":430,"y":120,"wires":[]},{"id":"5cbf71d7.878de8","type":"watson-translator","z":"dad6006e.5b03f8","name":"en to es","action":"translate","basemodel":"ar-en","domain":"general","srclang":"en","destlang":"es","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"en","destlanghidden":"es","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":440,"y":340,"wires":[["8aabb6ba.12ff38","e94346ce.5961"]]},{"id":"2b010857.d8cde","type":"watson-speech-to-text","z":"f890fb8b.d9d9b8","name":"","alternatives":1,"speakerlabels":true,"smartformatting":false,"lang":"en-US","langhidden":"en-US","langcustom":"NoCustomisationSetting","langcustomhidden":"","custom-weight":"0.5","band":"BroadbandModel","bandhidden":"","keywords":"","keywords-threshold":"0.5","word-confidence":false,"password":"","apikey":"M3tcaL1TUkS9rn7SuN2EWYxk4HV6lRiUnt66XH325KBZ","payload-response":false,"streaming-mode":false,"streaming-mute":true,"auto-connect":false,"discard-listening":false,"disable-precheck":false,"service-endpoint":"https://api.us-south.speech-to-text.watson.cloud.ibm.com/instances/76ca67df-8c3a-497e-aa3c-af39458e71d8","x":180,"y":200,"wires":[["d12b0954.9ec5","bff291be.47e56"]]},{"id":"d12b0954.9ec5","type":"debug","z":"f890fb8b.d9d9b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":450,"y":140,"wires":[]},{"id":"dcee329c.d97f18","type":"play audio","z":"f890fb8b.d9d9b8","name":"","voice":"0","x":1490,"y":460,"wires":[]},{"id":"e7c1c454.0e5c38","type":"change","z":"f890fb8b.d9d9b8","name":"set speech as payload","rules":[{"t":"set","p":"payload","pt":"msg","to":"speech","tot":"msg"},{"t":"delete","p":"speech","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1260,"y":460,"wires":[["dcee329c.d97f18"]]},{"id":"7a42c333.7ebdf4","type":"watson-text-to-speech","z":"f890fb8b.d9d9b8","name":"","lang":"es-ES","langhidden":"es-ES","langcustom":"NoCustomisationSetting","langcustomhidden":"","voice":"es-ES_LauraV3Voice","voicehidden":"es-ES_LauraV3Voice","format":"audio/wav","password":"","apikey":"HsnMmk_AV77jVLMKJqOvpyGtyB6Yd2-MW6Yj__c7m2ah","payload-response":false,"service-endpoint":"https://api.us-south.text-to-speech.watson.cloud.ibm.com/instances/a0216c77-6df9-419d-92d3-13b16a992536","x":980,"y":560,"wires":[["e7c1c454.0e5c38","8918a51f.55792"]]},{"id":"bff291be.47e56","type":"change","z":"f890fb8b.d9d9b8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"transcription","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":180,"y":320,"wires":[["96f8cdd0.3684b","79d8d6cb.345368"]]},{"id":"29cdaf63.ec1e28","type":"websocket in","z":"f890fb8b.d9d9b8","name":"audioInput","server":"cc275635.4e7948","client":"","x":360,"y":40,"wires":[[]]},{"id":"8918a51f.55792","type":"websocket out","z":"f890fb8b.d9d9b8","name":"audioOut","server":"cc275635.4e7948","client":"","x":1280,"y":600,"wires":[]},{"id":"8e00633a.9bf298","type":"microphone","z":"f890fb8b.d9d9b8","name":"","x":130,"y":40,"wires":[["2b010857.d8cde"]]},{"id":"96f8cdd0.3684b","type":"switch","z":"f890fb8b.d9d9b8","name":"voice commands","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"ayuda","vt":"str"},{"t":"cont","v":"el viaje cuesta","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":240,"wires":[["a974b5fe.28ca5"],["c1e93b77.fe42"]]},{"id":"a974b5fe.28ca5","type":"function","z":"f890fb8b.d9d9b8","name":"keyword \"ayuda\"","func":"var alertMsg = {payload: \"palabra clave detectada\"}\nreturn alertMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":810,"y":220,"wires":[["78a212fc.74f6d4"]]},{"id":"78a212fc.74f6d4","type":"debug","z":"f890fb8b.d9d9b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1070,"y":180,"wires":[]},{"id":"c1e93b77.fe42","type":"function","z":"f890fb8b.d9d9b8","name":"keyphrase \"el viaje vale\"","func":"var alertMsg = {payload: \"palabra clave detectada 10000\"}\nreturn alertMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":810,"y":280,"wires":[["e6f034b5.8e4e88"]]},{"id":"e6f034b5.8e4e88","type":"debug","z":"f890fb8b.d9d9b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1050,"y":280,"wires":[]},{"id":"79d8d6cb.345368","type":"watson-language-translator-identify","z":"f890fb8b.d9d9b8","name":"","service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":170,"y":580,"wires":[["e53d8b21.625a08","835a3256.5df298"]]},{"id":"e53d8b21.625a08","type":"debug","z":"f890fb8b.d9d9b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"lang.language","targetType":"msg","statusVal":"","statusType":"auto","x":250,"y":700,"wires":[]},{"id":"d45510e9.51703","type":"watson-translator","z":"f890fb8b.d9d9b8","name":"it to en","action":"translate","basemodel":"ar-en","domain":"general","srclang":"it","destlang":"en","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"it","destlanghidden":"en","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":570,"y":580,"wires":[["485b1fb.7352be"]]},{"id":"835a3256.5df298","type":"switch","z":"f890fb8b.d9d9b8","name":"","property":"lang.language","propertyType":"msg","rules":[{"t":"eq","v":"en","vt":"str"},{"t":"eq","v":"fr","vt":"str"},{"t":"eq","v":"it","vt":"str"},{"t":"eq","v":"ja","vt":"str"},{"t":"eq","v":"ru","vt":"str"}],"checkall":"false","repair":false,"outputs":5,"x":370,"y":560,"wires":[["4190fadc.78a80c"],["55f35b14.ce61dc"],["d45510e9.51703"],["a84a7cb8.9179"],["ca519cf1.840ba"]]},{"id":"4190fadc.78a80c","type":"watson-translator","z":"f890fb8b.d9d9b8","name":"en to es","action":"translate","basemodel":"ar-en","domain":"general","srclang":"en","destlang":"es","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"en","destlanghidden":"es","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":640,"y":480,"wires":[["7a42c333.7ebdf4"]]},{"id":"a84a7cb8.9179","type":"watson-translator","z":"f890fb8b.d9d9b8","name":"ja to en","action":"translate","basemodel":"ar-en","domain":"general","srclang":"ja","destlang":"en","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"ja","destlanghidden":"en","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":580,"y":640,"wires":[["377173b4.b67f5c"]]},{"id":"ca519cf1.840ba","type":"watson-translator","z":"f890fb8b.d9d9b8","name":"ru to en","action":"translate","basemodel":"ar-en","domain":"general","srclang":"ru","destlang":"en","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"ru","destlanghidden":"en","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":580,"y":700,"wires":[["2a2a1539.56535a"]]},{"id":"55f35b14.ce61dc","type":"watson-translator","z":"f890fb8b.d9d9b8","name":"fr to es","action":"translate","basemodel":"ar-en","domain":"general","srclang":"fr","destlang":"es","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"fr","destlanghidden":"es","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":630,"y":540,"wires":[["7a42c333.7ebdf4"]]},{"id":"485b1fb.7352be","type":"watson-translator","z":"f890fb8b.d9d9b8","name":"en to es","action":"translate","basemodel":"ar-en","domain":"general","srclang":"en","destlang":"es","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"en","destlanghidden":"es","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":720,"y":580,"wires":[["7a42c333.7ebdf4"]]},{"id":"377173b4.b67f5c","type":"watson-translator","z":"f890fb8b.d9d9b8","name":"en to es","action":"translate","basemodel":"ar-en","domain":"general","srclang":"en","destlang":"es","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"en","destlanghidden":"es","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":720,"y":640,"wires":[["7a42c333.7ebdf4"]]},{"id":"2a2a1539.56535a","type":"watson-translator","z":"f890fb8b.d9d9b8","name":"en to es","action":"translate","basemodel":"ar-en","domain":"general","srclang":"en","destlang":"es","password":"","apikey":"O5a_XBns4pG1T2vqLglObBCSt_0Y_XRLHa4H-TWNKjPc","custom":"","domainhidden":"general","srclanghidden":"en","destlanghidden":"es","basemodelhidden":"ar-en","customhidden":"","filetype":"forcedglossary","trainid":"","lgparams2":true,"service-endpoint":"https://api.us-south.language-translator.watson.cloud.ibm.com/instances/6cef7255-e12d-40b9-8d0b-14bcd9256f77","x":720,"y":700,"wires":[["7a42c333.7ebdf4"]]},{"id":"e94346ce.5961","type":"function","z":"dad6006e.5b03f8","name":"to lower case","func":"msg.payload = msg.payload.toLowerCase();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":480,"wires":[["fa37502d.02ade8"]]},{"id":"e49c7f2b.671ef","type":"switch","z":"2952041.d8a12fc","name":"voice commands","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"ayuda","vt":"str"},{"t":"cont","v":"adiós","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":190,"y":520,"wires":[["53c3c8ef.df0768"],["369dcccb.d7c034"]]},{"id":"53c3c8ef.df0768","type":"function","z":"2952041.d8a12fc","name":"keyword \"ayuda\"","func":"var alertMsg = {payload: \"palabra clave detectada: ayuda\"}\nreturn alertMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":500,"wires":[["2c2ba51.a5ca55a"]]},{"id":"2c2ba51.a5ca55a","type":"debug","z":"2952041.d8a12fc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":730,"y":500,"wires":[]},{"id":"369dcccb.d7c034","type":"function","z":"2952041.d8a12fc","name":"keyphrase \"chao\"","func":"var alertMsg = {payload: \"palabra clave detectada adiós\"}\nreturn alertMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":560,"wires":[["5fcd5b9.c6a9024"]]},{"id":"5fcd5b9.c6a9024","type":"debug","z":"2952041.d8a12fc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":560,"wires":[]},{"id":"36a9d671.6037ca","type":"function","z":"2952041.d8a12fc","name":"to lower case","func":"msg.payload = msg.payload.toLowerCase();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":210,"y":400,"wires":[["e49c7f2b.671ef"]]},{"id":"c24e4a0b.f05778","type":"debug","z":"2952041.d8a12fc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":610,"y":60,"wires":[]},{"id":"c4f861ee.275c","type":"websocket out","z":"2952041.d8a12fc","name":"textOut","server":"cc275635.4e7948","client":"","x":940,"y":220,"wires":[]},{"id":"8c96af3.b7145d","type":"websocket out","z":"2952041.d8a12fc","name":"textOut","server":"cc275635.4e7948","client":"","x":520,"y":200,"wires":[]}]